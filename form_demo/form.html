<!DOCTYPE html>
<html>
<head>
    <title> BG Submit Form </title>
</head>
<body>
<h1>Welcome to <b>Form</b></h1>
<p>This will be the form used for submitting strings</p>

<script>
function displayForm(id) {
	console.log(id);
    let check_status = document.getElementById(id);
	if(check_status){
		let displayValue = check_status.checked ? "block" : "none";
	    //document.getElementById(id + "Form").style.display ="block";
		document.getElementById(id + "Form").style.display = displayValue;
		if(displayValue === "block"){
		    document.getElementById(id +"-time-input").defaultValue = setTime()
		}
	}
}
</script>

<fieldset>
Pick what you want to document!
<form>
<input type="checkbox" name="bg" id="bg" value="bg" onclick="displayForm(this.id)"><label for="bg"> BG</label><br>
<input type="checkbox" name="food" id="food" value="food" onclick="displayForm(this.id)"><label for="food"> Food</label><br>
<input type="checkbox" name="insulin" id="insulin" value="insulin" onclick="displayForm(this.id)"><label for="insulin"> Insulin</label><br>
</form>
</fieldset>


<form method="post" id="bgForm" style="display:none">
<fieldset>
Blood Glucose:<br>
<input type="test" name="Blood Glucose" placeholder="Enter BG"><br>
Time:<br>
<input type="datetime-local" id="bg-time-input" name="time">
</fieldset>
</form>

<form method="post" id="insulinForm" style="display:none">
<fieldset>
Insulin Type: <br>
<!--This should be a user default -->
<input type="text" name="insulin type" placeholder="Enter insulin type"> <br>
Time:<br>
<input type="datetime-local" id="insulin-time-input" name="time">
</fieldset>
</form>


<form method="post" id="foodForm" style="display:none">
<fieldset>
Food:<br>
<input type="text" name="food" placeholder="Enter food"><br>
Time:<br>
<input type="datetime-local" id="food-time-input" name="time">
</fieldset>
</form>

<script>
//var s = new Date().toISOString();
//document.getElementById("time-input").defaultValue = s.slice(0, -5);
function setTime() {
	var tzOffset = new Date().getTimezoneOffset() * 60000;
	var localTime = new Date(Date.now() - tzOffset).toISOString().slice(0, -1);
	return(localTime)
}
// NOTE: the slice was used to convert from the ISO string I was getting to a format used by the HTML element
// I'm not sure the ISO string format I was getting is always gauranteed across browsers
// This seems to work for me but should be flagged as something to change later to make sure it always works


</script>

<input type="submit" value="Submit">
</form>

</body>
</html>
